{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","delete","put","Search","handleChange","newSearch","onChange","value","Form","handleNameChange","handleNumberChange","handleClick","newName","newNumber","onClick","type","Notification","message","className","Error","errorMessage","App","useStateWithLabel","initialValue","name","useState","setValue","useDebugValue","persons","setPersons","setNewName","setNewNumber","setNewSearch","setMessage","setErrorMessage","useEffect","getAll","clearInputs","personsService","then","res","data","handleDelete","e","target","dataset","window","confirm","displayNotification","setTimeout","displayError","preventDefault","find","person","personToEdit","number","catch","updatePerson","concat","regex","RegExp","filter","match","filterPersons","map","data-id","data-name","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d2f9f024.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"http://localhost:3001/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${+id}`);\n};\n\nconst edit = (id, newObject) => {\n  return axios.put(`${baseUrl}/${+id}`, newObject);\n};\n\nexport default {\n  getAll,\n  create,\n  remove,\n  edit,\n};\n","import React, { useState, useEffect, useDebugValue } from \"react\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const useStateWithLabel = (initialValue, name) => {\n    const [value, setValue] = useState(initialValue);\n    useDebugValue(`${name}: ${value}`);\n    return [value, setValue];\n  };\n\n  //States\n  const [persons, setPersons] = useStateWithLabel([], \"persons\");\n  const [newName, setNewName] = useStateWithLabel(\"\", \"newName\");\n  const [newNumber, setNewNumber] = useStateWithLabel(\"\", \"newNumber\");\n  const [newSearch, setNewSearch] = useStateWithLabel(\"\", \"search\");\n  const [message, setMessage] = useStateWithLabel(null, \"message\");\n  const [errorMessage, setErrorMessage] = useStateWithLabel(\n    null,\n    \"errorMessage\"\n  );\n  //Functions\n  useEffect(() => {\n    getAll();\n  }, []);\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const personAlreadyExists = () => {\n    return persons.find((person) => person.name === newName);\n  };\n\n  const addNewPerson = () => {\n    personsService\n      .create({\n        name: newName,\n        number: newNumber,\n      })\n      .then((res) => {\n        setPersons(persons.concat(res.data));\n        displayNotification(`${newName} was added to phone book.`);\n      });\n  };\n\n  const updatePerson = () => {\n    const personToEdit = persons.find((person) => person.name === newName);\n    personsService\n      .edit(+personToEdit.id, {\n        name: newName,\n        number: newNumber,\n      })\n      .then(() => displayNotification(`${newName}'s number was changed.`))\n      .catch(() =>\n        displayError(`${newName} was already deleted from phonebook`)\n      );\n  };\n\n  const clearInputs = () => {\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const getAll = () => {\n    personsService.getAll().then((res) => {\n      setPersons(res.data);\n    });\n  };\n\n  const handleAdd = (e) => {\n    e.preventDefault();\n\n    if (personAlreadyExists()) {\n      if (\n        window.confirm(\n          `${newName} already exists in phonebook. Replace old number with new one?`\n        )\n      ) {\n        updatePerson();\n\n        getAll();\n        clearInputs();\n      } else {\n        clearInputs();\n      }\n    } else {\n      addNewPerson();\n      clearInputs();\n    }\n  };\n\n  const handleSearchChange = (e) => {\n    setNewSearch(e.target.value);\n  };\n\n  const filterPersons = () => {\n    const regex = new RegExp(newSearch, \"gi\");\n    return persons.filter((person) => person.name.match(regex));\n  };\n\n  const handleDelete = (e) => {\n    const { name, id } = e.target.dataset;\n    if (window.confirm(`Delete ${name}`)) {\n      personsService\n        .remove(id)\n        .then(() => displayNotification(`${name} was deleted`));\n\n      getAll();\n    }\n  };\n\n  const displayPersons = () => {\n    return filterPersons().map((person) => (\n      <div key={person.name}>\n        {person.name} {person.number}{\" \"}\n        <button\n          onClick={handleDelete}\n          data-id={person.id}\n          data-name={person.name}\n        >\n          delete\n        </button>\n      </div>\n    ));\n  };\n\n  const displayNotification = (message) => {\n    setMessage(message);\n    setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n  };\n\n  const displayError = (errorMessage) => {\n    setErrorMessage(errorMessage);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Error errorMessage={errorMessage} />\n      <Search handleChange={handleSearchChange} newSearch={newSearch} />\n\n      <h3>add a new</h3>\n      <Form\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleClick={handleAdd}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h3>Numbers</h3>\n      {displayPersons()}\n    </div>\n  );\n};\n\n//React Modules\n\nconst Search = ({ handleChange, newSearch }) => {\n  return (\n    <div>\n      filter shown with\n      <input onChange={handleChange} value={newSearch} />\n    </div>\n  );\n};\n\nconst Form = ({\n  handleNameChange,\n  handleNumberChange,\n  handleClick,\n  newName,\n  newNumber,\n}) => {\n  return (\n    <form>\n      <div>\n        name: <input onChange={handleNameChange} value={newName} />\n      </div>\n      <div>\n        number: <input onChange={handleNumberChange} value={newNumber} />\n      </div>\n      <div>\n        <button onClick={handleClick} type=\"submit\">\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n  return <div className=\"notification\">{message}</div>;\n};\n\nconst Error = ({ errorMessage }) => {\n  if (errorMessage === null) {\n    return null;\n  }\n  return <div className=\"error\">{errorMessage}</div>;\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}